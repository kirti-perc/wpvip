!function(e,o){var a={cache:function(){a.vars={},a.els={},a.vars.count=[],a.vars.index_settings={},a.els.process_overlay=e(".process-overlay"),a.els.process=e(".process"),a.els.process_content=e(".process__content--processing"),a.els.process_loading=e(".process__content--loading"),a.els.process_complete=e(".process__content--complete"),a.els.process_from=e(".process__count-from"),a.els.process_to=e(".process__count-to"),a.els.process_total=e(".process__count-total"),a.els.process_loading_bar_fill=e(".process__loading-bar-fill")},on_ready:function(){a.cache(),a.watch_triggers()},watch_triggers:function(){e("[data-iconic-wssv-ajax]").on("click",function(){var s=e(this).data("iconic-wssv-ajax");if(null==a[s])return!1;a[s].run()}),e(".process__close").on("click",function(){a.process.hide(),e(this).data("reload")&&location.reload()}),e(o.body).on("click","[data-iconic-wssv-process-screen]",function(s){s.preventDefault();s=e(this).data("iconic-wssv-process-screen");a.process.show(s),e(o.body).trigger("iconic_wssv_trigger_process_"+s)}),e(o.body).on("iconic_wssv_trigger_process_start",function(){a.process.show("loading"),a.process_product_visibility.start()})},process_product_visibility:{run:function(){a.process.show("open")},start:function(){var s=a.process_product_visibility.get_settings();a.process_product_visibility.clear_settings(),a.get_count("product",function(o){a.process.update_count(1,10,o),a.process.show("processing"),a.batch("process_product_visibility",o,10,0,function(s,e){s?(s=o<=(s=e+10)?o:s,a.process.update_count(e,s,o),a.process.set_percentage(e,o)):(a.process.show("complete"),a.process.set_percentage(o,o))},s)})},clear_settings:function(){a.vars.index_settings={}},get_settings:function(){if(!e.isEmptyObject(a.vars.index_settings))return a.vars.index_settings;var s=e(".process__form").serializeArray();return s.length<=0||e.each(s,function(s,e){var o;""!==e.value&&("undefined"==(o=typeof a.vars.index_settings[e.name])?a.vars.index_settings[e.name]=e.value:("object"!=o&&(o=a.vars.index_settings[e.name],a.vars.index_settings[e.name]=[],a.vars.index_settings[e.name].push(o)),a.vars.index_settings[e.name].push(e.value)))}),a.vars.index_settings}},process:{show:function(s){s=void 0===s?"content":s,a.els.process_overlay.show(),a.els.process.show(),e(".process__content").hide(),e(".process__content--"+s).show(),e(o.body).trigger("iconic_wssv_show_process_"+s)},hide:function(){a.els.process_overlay.hide(),a.els.process.hide(),a.els.process_loading.show(),a.els.process_complete.hide(),a.els.process_content.hide(),a.process.reset_percentage(),e(o.body).trigger("iconic_wssv_hide_process")},update_count:function(s,e,o){a.els.process_from.text(s),a.els.process_to.text(e),a.els.process_total.text(o)},set_percentage:function(s,e){a.els.process_loading_bar_fill.css("width",s/e*100+"%")},reset_percentage:function(){a.els.process_loading_bar_fill.css("width","0%")}},batch:function(o,t,c,n,r,i){i=i||{};var _=!0,s={action:"iconic_wssv_"+o,iconic_wssv_limit:c,iconic_wssv_offset:n};e.extend(s,i),e.post(ajaxurl,s,function(s){var e=n+c;e<t?a.batch(o,t,c,e,r,i):_=!1,"function"==typeof r&&r(_,e)})},get_count:function(e,o){null!=a.vars.count[e]?"function"==typeof o&&o(a.vars.count[e]):jQuery.post(ajaxurl,{action:"iconic_wssv_get_"+e+"_count"},function(s){"function"==typeof o&&o(s.count),a.vars.count[e]=s.count})}};e(o).ready(a.on_ready())}(jQuery,document);